<?php

namespace App\Http\Controllers;

use App\Models\Artical;
use App\Models\Film;
use hisorange\BrowserDetect\Parser as Browser;
use Illuminate\Http\Request;
use Spatie\Browsershot\Browsershot;


class ShareLinkController extends Controller
{
    public function show()
    {
        return response()->json([
            'title' => 'Your Title Here',
            'description' => 'Your Description Here',
            'image' => 'data:image/png;base64,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',
            'url' => 'https://www.google.com/'
        ]);
    }

   public function shareArticalToFacebook($id){
       $cloudController = new UploadController();
       $artical = Artical::find($id);
       $title = $artical->title;
       $content = $artical->description;
       $image = $cloudController->getSignedUrl($artical->image);

       $facebook = 'https://apps.apple.com/kh/app/film-library/id1582162598';

       return view('article_share', compact('title', 'content', 'image', 'facebook'));


   }

   public function shareFilm($id){
         $cloudController = new UploadController();
         $film = Film::find($id);
         $title = $film->title;
         $content = $film->overview;
         $id = $film->id;
         $image = $cloudController->getSignedUrl($film->poster);

         $facebook = 'https://apps.apple.com/kh/app/film-library/id1582162598';

         return view('screenshot', compact('title', 'content','image', 'facebook', 'id'));
   }

    public function viewShare($id){
        // Find the article by id
        $article = Artical::find($id);

        // Check if article exists
        if (!$article) {
            return response()->json(['message' => 'Article not found'], 404);
        }

        // Increment the share count
        $article->increment('share_count');

        // Return a success response
        return response()->json(['message' => 'Article shared successfully']);
    }


}


